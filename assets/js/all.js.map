{"version":3,"sources":["all.js","old.js"],"names":["AOS","init","tickets","btnAddTicket","document","querySelector","inputValues","querySelectorAll","addEventListener","addTicket","ticketData","isTicketData","forEach","item","ticketName","value","ticketImgUrl","scenicArea","ticketPrice","ticketNum","ticketRank","ticketDescribe","id","length","getAttribute","name","imgUrl","area","price","group","rate","description","form","push","reset","render","initRequired","checkRequired","ticketsArr","ticketList","searchResult","emptyResult","str","classList","remove","add","aosDelay","ticket","innerHTML","textContent","getChart","searchArea","e","target","filterArea","filter","url","axios","get","then","res","data","err","console","log","chartData","areaData","Object","entries","chart","c3","generate","bindto","columns","type","colors","高雄","台北","台中","donut","title","width","label","show","size","height","span","parentNode","previousSibling","lastElementChild"],"mappings":"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","file":"all.js","sourcesContent":["\"use strict\";\n\nAOS.init();\n\nlet tickets;\nconst btnAddTicket = document.querySelector(\"#btnAddTicket\");\nconst inputValues = document.querySelectorAll(\".input\");\n\n// 新增套票 (改練習 querySelectorAll() 獲取所有 input)\nbtnAddTicket.addEventListener(\"click\", addTicket);\nfunction addTicket() {\n  const ticketData = {};\n  let isTicketData = false;\n\n  inputValues.forEach((item) => {\n    isTicketData =\n      ticketName.value !== \"\" &&\n      ticketImgUrl.value !== \"\" &&\n      scenicArea.value !== \"\" &&\n      ticketPrice.value !== \"\" &&\n      ticketNum.value !== \"\" &&\n      ticketRank.value !== \"\" &&\n      ticketDescribe.value !== \"\";\n\n    ticketData.id = tickets.length + 1;\n    if (item.getAttribute(\"id\") === \"ticketName\") {\n      ticketData.name = item.value;\n    } else if (item.getAttribute(\"id\") === \"ticketImgUrl\") {\n      ticketData.imgUrl = item.value;\n    } else if (item.getAttribute(\"id\") === \"scenicArea\") {\n      ticketData.area = item.value;\n    } else if (item.getAttribute(\"id\") === \"ticketPrice\") {\n      ticketData.price = item.value;\n    } else if (item.getAttribute(\"id\") === \"ticketNum\") {\n      ticketData.group = item.value;\n    } else if (item.getAttribute(\"id\") === \"ticketRank\") {\n      ticketData.rate = item.value;\n    } else if (item.getAttribute(\"id\") === \"ticketDescribe\") {\n      ticketData.description = item.value;\n    }\n  });\n  if (isTicketData) {\n    const form = document.querySelector(\"form\");\n    tickets.push(ticketData);\n    form.reset(); // 新增完，清空表單\n    render(tickets);\n    initRequired();\n  } else {\n    // alert(\"請輸入套票完整資訊\");\n    checkRequired(inputValues);\n  }\n}\n\n// 渲染畫面(傳入的參數為 原始套票陣列 或 篩選地區後的套票陣列)\nfunction render(ticketsArr) {\n  const ticketList = document.querySelector(\"#ticketList\");\n  const searchResult = document.querySelector(\"#searchResult\");\n  const emptyResult = document.querySelector(\"#emptyResult\");\n  let str = \"\";\n\n  if (ticketsArr.length === 0) {\n    // 沒資料則顯示查無資料\n    emptyResult.classList.remove(\"d-none\");\n  } else {\n    emptyResult.classList.add(\"d-none\");\n  }\n\n  let aosDelay = 0;\n  ticketsArr.forEach((ticket) => {\n    str += `\n    <li class=\"col-md-6 col-lg-4 mb-6\" data-aos=\"fade-up\" data-aos-delay=\"${(aosDelay += 100)}\" data-aos-duration=\"700\">\n      <div class=\"card position-relative border-0\">\n        <a href=\"#!\" class=\"overflow-hidden\">\n          <img src=\"${\n            ticket.imgUrl\n          }\" class=\"card-img-top ticket-img\" alt=\"風景圖\">\n        </a>\n        <span class=\"position-absolute top-n3 start-0 bg-primary-light fs-5\n          fw-light lh-sm text-white px-6 py-2 rounded-end\">${ticket.area}</span>\n        <div class=\"card-body position-relative pt-6 pb-0\">\n          <span class=\"position-absolute top-n7 start-0 bg-primary-dark text-white px-2 py-1 rounded-end\">${\n            ticket.rate\n          }</span>\n          <h5 class=\"card-title text-primary fs-4 fw-light border-bottom border-2 border-primary pb-1 mb-5\"><a href=\"#!\">${\n            ticket.name\n          }</a></h5>\n          <p class=\"card-text lh-lg\">${ticket.description}</p>\n        </div>\n        <div class=\"card-footer border-0 bg-white pt-7\">\n          <div class=\"text-primary d-flex align-items-center\">\n            <span class=\"material-symbols-outlined fill-1 me-1\">\n              error\n            </span>\n            <p class=\"me-auto\">剩下最後 ${ticket.group} 組</p>\n            <span class=\"me-1\">TWD</span>\n            <p class=\"fs-2 font-roboto\">$${ticket.price}</p>\n          </div>\n        </div>\n      </div>\n    </li>\n    `;\n  });\n  ticketList.innerHTML = str;\n  searchResult.textContent = `本次搜尋共 ${ticketsArr.length} 筆資料`;\n  getChart(ticketsArr);\n}\n\n// 地區篩選\nconst searchArea = document.querySelector(\"#searchArea\");\n\nsearchArea.addEventListener(\"change\", (e) => {\n  const area = e.target.value;\n  // 當選擇全部地區，則顯示套票陣列\n  if (area === \"全部地區\") {\n    render(tickets);\n    return;\n  }\n  // 篩選特定區域並顯示畫面\n  const filterArea = tickets.filter((ticket) => {\n    return ticket.area === area;\n  });\n  render(filterArea);\n});\n\n// 網站初始化 使用 axios 抓取外部資料\nfunction init() {\n  const url =\n    \"https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json\";\n  axios\n    .get(url)\n    .then(function (res) {\n      tickets = res.data.data;\n      render(tickets);\n      getChart(tickets);\n    })\n    .catch(function (err) {\n      console.log(err);\n    });\n}\ninit();\n\nlet chartData = [];\n\n// C3 圓餅圖\nfunction getChart(tickets) {\n  const areaData = {};\n  tickets.forEach((item) => {\n    areaData[item.area] ? areaData[item.area]++ : (areaData[item.area] = 1);\n  });\n  chartData = Object.entries(areaData);\n  // [[\"高雄\", 2], [\"台北\",1], [\"台中\", 1]]\n\n  const chart = c3.generate({\n    bindto: \"#chart\",\n    data: {\n      columns: chartData,\n      type: \"donut\",\n      colors: {\n        高雄: \"#E68619\",\n        台北: \"#26BFC7\",\n        台中: \"#5151D3\",\n      },\n    },\n    donut: {\n      title: \"地區比例\",\n      width: 20, // donut 寬度\n      label: {\n        // 隱藏圖表直接顯示的 % 數\n        show: false,\n      },\n    },\n    size: {\n      // 整體寬高\n      height: 200,\n      width: 200,\n    },\n  });\n}\n\n// 驗證必填樣式\nfunction checkRequired(inputValues) {\n  inputValues.forEach((item) => {\n    const span =\n      item.parentNode.previousSibling.previousSibling.lastElementChild;\n    if (!item.value) {\n      span.classList.remove(\"d-none\");\n    } else {\n      span.classList.add(\"d-none\");\n    }\n  });\n}\n// 初始化必填樣式\nfunction initRequired() {\n  inputValues.forEach((item) => {\n    const span =\n      item.parentNode.previousSibling.previousSibling.lastElementChild;\n    span.classList.add(\"d-none\");\n  });\n}\n","// btnAddTicket.addEventListener(\"click\", () => {\n//   const ticketName = document.querySelector(\"#ticketName\");\n//   const ticketImgUrl = document.querySelector(\"#ticketImgUrl\");\n//   const scenicArea = document.querySelector(\"#scenicArea\");\n//   const ticketPrice = document.querySelector(\"#ticketPrice\");\n//   const ticketNum = document.querySelector(\"#ticketNum\");\n//   const ticketRank = document.querySelector(\"#ticketRank\");\n//   const ticketDescribe = document.querySelector(\"#ticketDescribe\");\n\n//   const ticketData = {\n//     id: tickets.length + 1,\n//     name: ticketName.value,\n//     imgUrl: ticketImgUrl.value,\n//     area: scenicArea.value,\n//     price: Number(ticketPrice.value),\n//     group: Number(ticketNum.value),\n//     rate: Number(ticketRank.value),\n//     description: ticketDescribe.value,\n//   };\n\n//   const isTicketData =\n//     ticketName.value !== \"\" &&\n//     ticketImgUrl.value !== \"\" &&\n//     scenicArea.value !== \"\" &&\n//     ticketPrice.value !== \"\" &&\n//     ticketNum.value !== \"\" &&\n//     ticketRank.value !== \"\" &&\n//     ticketDescribe.value !== \"\";\n\n//   // 有輸入套票訊息才能新增\n//   if (isTicketData) {\n//     const form = document.querySelector(\"form\");\n//     tickets.push(ticketData);\n//     form.reset(); // 新增完，清空表單\n//     render(tickets);\n//   } else {\n//     alert(\"請輸入套票資訊\");\n//   }\n// });\n"]}